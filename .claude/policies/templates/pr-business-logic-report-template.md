# PR#[番号] ビジネスロジック調査レポート

> **CRITICAL - この構造は変更禁止**
>
> このテンプレートの構造（セクション順序、テーブル列数・列名、Markdown形式）は**絶対に変更してはならない**。
>
> - セクションの追加・削除・並び替え禁止
> - テーブルの列数・列名の変更禁止
> - 独自フォーマットへの改変禁止
>
> **ただし、該当する内容がない場合の扱い**:
> - セクション見出しは残し、「該当なし」または「N/A」と記載すること
> - 無理に内容を創作してはならない
>
> 詳細は `~/.claude/policies/pr-business-logic-report.md` セクション0.4を参照。

**作成日**: [YYYY-MM-DD]
**対象PR**: [#番号 PRタイトル](PR URL)
**関連Issue**: [#番号](Issue URL) ※存在する場合

---

## 1. 概要

### 1.1 調査対象の機能（ユースケース）

| 項目 | 内容 |
|------|------|
| **機能名** | [特定した機能名] |
| **機能の目的** | [ユーザーが達成したい目的] |
| **PRとの関係** | [PRがこの機能のどの部分に関わるか] |

### 1.2 機能の概要

[この機能が何をするものか、2-3文で記載]

---

## 2. データ構造

### 2.1 関連テーブル

| テーブル名 | 説明 |
|-----------|------|
| [テーブル名] | [テーブルの役割・説明] |

### 2.2 フィールド構造

> **注**: 複合フィールド（ビットパターン、エンコード値等）がある場合は、各桁・各部分の意味を明確化すること。

#### [フィールド名]（[桁数]桁）

| 桁位置 | 意味 | 値=1の場合 | 値=0の場合 |
|--------|------|-----------|-----------|
| 1桁目 | [意味] | [説明] | [説明] |
| 2桁目 | [意味] | [説明] | [説明] |

**パターン例**:
- `[パターン]`: [説明]
- `[パターン]`: [説明]

---

## 3. 定数・Enum体系

### 3.1 [Enum/定数クラス名]（[ファイルパス]）

| コード | 定数名 | 説明 |
|--------|--------|------|
| `[値]` | [定数名] | [説明] |

### 3.2 パターン分類

| パターン | 対象コード | チェック内容 |
|----------|-----------|-------------|
| [パターン名] | [コード一覧] | [チェック内容] |

---

## 4. バリデーションロジック詳細

### 4.1 [ロジック名]

**対象ファイル**: [ファイルパス:行番号]

**コード**:
```[言語]
[実際のコードを引用]
```

**判定条件**:
1. [条件1]
2. [条件2]

---

## 5. ビジネスルール詳細

### 5.1 [ルールカテゴリ名]

| 条件 | 結果 |
|------|------|
| [条件1] | [結果1] |
| [条件2] | [結果2] |

### 5.2 階層関係

> ※ 階層関係が存在しない機能の場合は「該当なし」と記載

```
[上位] > [中位] > [下位]
```

- [上位]を保有していれば[中位]のエラーは解除
- [補足説明]

### 5.3 特例処理

**[特例名]**:

```[言語]
[特例処理のコード]
```

- [特例の説明1]
- [特例の説明2]

---

## 6. エラーメッセージ

| エラー種別 | メッセージ |
|-----------|-----------|
| [エラー種別] | [メッセージ内容] |

---

## 7. 影響範囲

| 項目 | 内容 |
|------|------|
| 対象ファイル | [ファイルパス] |
| 対象関数 | [関数名] |
| 対象カテゴリ/種別 | [カテゴリ名] |
| データ参照 | [参照するデータ・テーブル] |

---

## 8. ビジネスルールまとめ

### 8.1 [機能名]の条件

1. **[条件カテゴリ1]**（[詳細条件]）
2. **[条件カテゴリ2]**（以下のいずれか）:
   - [詳細条件A]
   - [詳細条件B]

### 8.2 [概念名]の関係

```
[関係性を図示または箇条書きで説明]
```

---

## 調査サマリ

### 調査項目数

| カテゴリ | 項目数 |
|---------|--------|
| 関連テーブル | XX件 |
| 定数・Enum | YY件 |
| バリデーションルール | ZZ件 |
| ビジネスルール | AA件 |
| エラーメッセージ | BB件 |

---

## 網羅性検証結果

| 検証項目 | 結果 | 備考 |
|---------|------|------|
| 機能（ユースケース）を正しく特定したか | ✅/❌ | [特定した機能名] |
| 機能全体の処理を調査したか | ✅/❌ | [調査範囲の説明] |
| データ構造を正確に把握したか | ✅/❌ | [調査したテーブル] |
| すべてのバリデーションルールを抽出したか | ✅/❌ | [抽出したルール数] |
| ビジネスルールを網羅的に分析したか | ✅/❌ | [分析したルール数] |

**総合判定**: [すべて✅の場合のみ「合格」]

**未達成項目がある場合の対応**: 不足情報を追加調査して再検証すること

---

## 備考

### 調査時の特記事項

- [特記事項があれば記載]

### 参考資料

- [参考にしたドキュメントやファイルがあれば記載]
